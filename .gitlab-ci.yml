stages:
  - test
  - deploy

test:
  image: python:3.9
  interruptible: true
  script:
    - cd /builds/ai/bots/psychedelic-bot
    - pip install openai mattermostdriver pylint
    - pylint app.py

deploy:
  image: psychedelic-bot:latest
  interruptible: true
  environment:
    name: $CI_COMMIT_REF_NAME
  script:
    - python3 app.py